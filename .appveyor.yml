version: 1.0.{build}

image: Visual Studio 2017

install:
  - ps: |
      if (!(Test-path -Path "C:\FFplay64")) {
        Write-Output "Download FFmpeg Dependencies"
        Invoke-WebRequest "https://dl.boxcloud.com/d/1/b1!rBbZyZMtP2mwTr-YgCQyGRqO1FrqhAgbpdH4kKpG48aNVre_73urCJQ3CQR3pmMd3OYAIXsY8n6t_cj5Pzdck5vPbrIJ5jHWjkMLbm_Izo_896tMu8iYb-3xPnJf0i2ZnpQPfuCKJvpArGomq0tMeqvOp7mDN--3BpNBAPJylkHzps_fuoLNsRtb-Hya1N5FBi1tN0sbOT50aD0dU1y9CHsLzHJVzQGVc7LXgZ4cvv5IMCF1CRQGk6MaN_V46MfjFQLI04uCirhoWlgPEtwjXFgJX0dpQU2FQgXR5V6B_9jUQgAfwFI_XvEhSQIsTnMdzTkWRBTi7kCcTANPHGxFdJnF_zbYn7u_sH_qqERflvNNp9US4cjt7uFJg1K4oepaGza9JG3cOfyjS0uZHNs6Q5Cat-csnFOm1ntdO2sdd6rK6HxguJ-4Xv_LQuAWvOrPi_7brGPh3gtfSK3pLe4piIbNF0thpJ-zutvEs3LTcNYYoWIYho2VGxfmz9AFA6hSYfDL3Hn4BN3lYLXPtJXTUlpbvaDbsw4l8Ih0y-WEQPQWDcW3yhRkt27PjYN3rUxzluafwaa41e3DueSl1Es-_B8goxwYIp0UwpS39RTF2pgVHbLKeJVjEavB-0Jzo_aEA7-nSVoYB85r058dFFqUP3LxyTw3CMi67FSlg_eyeyRG6bVx-QAR28VAqvQ-D8Y4ePZ6d5iPGR79qMMcHihPGB3J1ibGRdRple692szlDlf0MCq7KRd6u-jbfVm76Y1ZxdRgpjkUceDaNbrIttsayrOJCRGg5C7edMTt7LS8EzsWxYoXiwFo7LrKCwZoj__1v1kZ1NSGbbNawCoxw1MMscHrrmy0L5ZMbn9ODxLWsVe93Wcht9_cw5r-wtgZg2Blkf_Ib9Czw413InIH3UzYQDqN1DmpGRpktXsMZETeJeGDFYG76hWx3imypg4Aa_A4TXG5PW2YU-n_fX_j-NME5A7S9o74OyxN-PCtNfOBJvfbA6N6LY4f9fO_np1WtOTQTmioujE8exTNsaroDELQzJc7jibafRhV9o_tSdoSRsq8kANzMQRisC4Nd3PPA7Dq_-pemlHVwL3FCJ_ZZ8gaffpprOXdY_Oi_3TqsAgtML8UtjcIbmRy_VdD8Sc_Z4bsmlhzal1noLMU7IWXpNFeqPuUJs_15CAvG2Eb1MhIITn0aJ0ShLiB7-fSxlySufcbzHEy7BQ2YH7ECGFGgLdkgfsTEXT7NqocKOuVzH2tUVt5LJsfxk6myvhYkTuwjrNgRE5-3TglQg../download" -OutFile "C:\FFplay64.zip"
        Write-Output "Extract FFmpeg dependencies"
        Expand-Archive -LiteralPath C:\FFplay64.zip -DestinationPath C:\
      }
      $msbuild = (Get-Command msbuild).path
      Write-Output $msbuild

  - cmd: mvn --version
  - cmd: java -version


cache:
  - C:\apache-maven-3.5.4\
  - C:\Users\appveyor\.m2
  - C:\FFplay64\

before_build:
  - cd %APPVEYOR_BUILD_FOLDER%\src\main\cpp
  - nuget restore MediaPlayer.sln
  - cd %APPVEYOR_BUILD_FOLDER%

build_script:
  - mvn -X -U -Pwin64-release -Dmaven.test.skip=true clean compile